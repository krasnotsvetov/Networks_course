# Лекция 2

## Эталонно-структурная схема сети связи

![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_1.png)

Посмотрим подробнее на беспроводной роутер:

![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_2.png)

Посмотрим теперь внимательно на такую схему:

![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_3.png)

Что мы можем сказать о ней?
В начале нам необходимо получить сигнал с источника сигнала(ИС), затем преоброзавать его в нормальное представление(КИ, кодер источника), 
после чего мы можем обеспечить помехоустойчивость благодаря кодеру канала (КК) и передав их на модулятор(М), например, это антенна, мы преобразуем их в нечто, что можем передать через среду, после чего начинаем обратную процедуру.
Сперва в демоляторе(ДМ) из нечто в данные, затем декодер канала распаковывает данные(ДКК), а после чего декодери источника(ДКИ) превращает
данные в исходный сигнал и передает получателю сообщения.

В кратце, это можно представить следуюещей таблицей:

<pre>
+---------------------------+------------------------------------------------------+----------------+
| Что                       | Зачем                                                | Пример         |
+---------------------------+------------------------------------------------------+----------------+
| Источник сообщения (ИС)   | Очевидно                                             | Микрофон       |
| Кодер источника (КИ)      | Преобразует данные в нормальное представление        | Звуковая карта |
| Кодер канала (КК)         | Обеспечивает помехоустойчивость                      | Сетевая карта  |
| Модулятор (М)             | Преобразует данные в то, что можно передать по среде | Антенна        |
| Среда                     | Передаёт сигнал                                      | ~~             |
| Демодулятор (ДМ)          | Превращает нечто передаваемое в данные               | Антенна        |
| Декодер канала (ДКК)      | Распаковывает данные                                 | Сетевая карта  |
| Декодер источника (ДКИ)   | Превращает данные в исходный сигнал                  | Звуковая карта |
| Получатель сообщения (ПС) | Очевидно                                             | Динамик        |
+---------------------------+------------------------------------------------------+----------------+
</pre>

Пример для КИ:

![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_4.png)

Вот эти вот три элемента определяли передатчик, элементы справа -- приёмник.
Между передатчиком и средой всегда есть интерфейс (стык).

КИ + ДКИ = кодек источника <br/>
КК + ДКК = кодек канала <br/>
М + ДМ = модем <br/>


![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_5.png)

В частности TX и RX образуют трансивер(приемопередадчик), справа на картинке примеры кодеков источика, кодеков канала и модема

![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_6.png)



Далее можно поговорить о том, что в среде возможны искажения нашего сигнала. Именно за этим мы использовали М и затем ДМ.
Допустим мы передавали слово *C*, тогда КК превратит его в *U*, во время передачи у нас могли измениться данные, пусть это будет вектор *E* из гауссова распределения, и полученное слово *V = U + E*. На выходе из ДКК мы хотим получить слово *C*. Для этого нам нужно хорошо подбирать алгоритмы кодирования. Рассмотрим какие коды бывают

### Коды
(относится к кодекам канала)

 - Блочные
   - СRC
   - Рида-Соломона
   - БЧХ
   - Хэмминга
   - LDPC
 - Непрерывные
   - Свёрточные
   - Решетчатые
   - Фонтанные
   - Raptor
   - Турбокоды
 - Каскадные (преимущества блочных и непрерывных)<br/>
   Имеют структуру К1.К2.К3 (сколько-то) <br/>
   Последный -- внутренний, остальные -- внешние
   
   Дальность передачи зависит от среды.

Первый всепланетный передатчик сделан Бонч-Бруевичем.
<!-- (Отравился ртутью, выкачивая из ламп воздух, но его спасли)
(Отечественные системы радиоподавления - лучшие. Это вопрос веры.)-->

### Сообщения

 - Непрерывные
 - Дискретные
 - Цифровые

Это определяется алфавитом, которые бывают

 - Непрерывный
 - Дискретный
 - Цифровой

Непрерывные сообщения передаются сейчас, например, по радио.
Устойчивость к помехам обеспечивается большой мощностью -- 5 кВт,
что обеспечивает покрытие на ~120 км (Останкино -- 10 кВт, 200 км).
В движении всё становится плохо.

Цифровое от дискретного отличается только тем, что уровни пронумерованы.


Непрерывные сообщения транслируются непрерывно. Дискретные и цифровые по дискретным промежуткам.
Отрезок времени измеряется наносекундами (порядка 10). Это позволяет достить терабитных скоростей в проводе, и приводит к ограничению
беспроводной связи.
Скорость определяется шириной канала (это "окно" частот импульса). Если присутсвуеткуча искажений, то они очень сильно сужают это окно.
Например, кабель под феном медленный.

*NB* : Все три вида сообщений могут быть преобразованы друг в друга
![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_7.png)

### Кодер канала

Тип сообщения не меняется.

Для непрерывных сообщений вносятся предискажения, ибо просто так исправить ошибки на НС невозможно. Предискажения статистически улучшают связь.

Для дискретных и цифровых -- добавление избыточности (было описано выше, повторим ещё раз). На кодер приходит информационная комбинация, кодер добавляет проверочные символы, получает кодовую комбинацию. Есть два способа соединять проверку с информацией -- систематические и несистематические КК. В первом случае символы добавляются в конец ИК, во втором -- куда-то.

### Модулятор

Сигнал может быть дискретным (существует по интервалам времени) и непрерывным (существует постоянно, например радиоволна)
Любые сообщения могут передаваться любым из них. Процесс преобразования в непрерывный сигнал называется модуляция,
в дискретный -- манипуляция.

### Модуляция

В модулятор поступает сообщение и несущие колебания, выходит сигнал. Для дискретного и цифрового сообщения широко используется табличное
преобразование -- каждой комбинации сопостовляется несущее колебание. Опять таки, несущих колебаний столько, какова ширина канала.

Чтобы "посадить" информацию на несущее колебание используется модуляция. Бывает частотная (FM -- радио, G1 сети), амплитудная (AM -- радио, ТВ) и фазовая (PM -- ТВ (конкретно, PAL)).

Фазовая имеет проблемы с синхронизацией, частотная требует широкую полосу, амплитудная крайне неустойчива к помехам.

### Манипуляция
 - FSK -- частотная
 - ASK -- амплитудная
 - PSK -- фазовая

Кодер и модулятор обычно идут в паре, именуемой СКК (сигнально-кодовая конструкция). Она определяет вид модуляции (манипуляции) и скорость кода.

Область сигнала может быть временной или частотной. В первом случае ловится осцилографом, во втором -- анализатором спектра (преобразование Фурье).

Так же можно почитать о сигнальных диаграмах(сигнальное созвездие)

## Приёмник
### Демодулятор
Одна из наиболее важных частей приёмника. Если он не отработал,
остальные части приёмника ничего не будут делать.

На входе демодулятора в теории находится сигнал. На самом деле там может
оказаться 

 - Сигнал
 - Сигнал + шум
 - Сигнал + шум + помехи
 - Шум

Самы простой и распространённый случай на практике -- сигнал + шум.
Шум генерирует много что. Задачей демодулятора в таком случаее является
обнаружение сигнала в смеси (это не совсем точно, но как-то так).
Первая задача теории приёма -- обнаружение сигнала на фоне шума.

Помеха -- это тоже сигнал, но не нам. Оно для нас бесполезно и только 
мешает. Возникает вторая задача приёма -- задача различения.

В первом и четвёртом случае так же происходит обнаружение сигнала.

![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_8.png)

Рабочая характеристика приёмника показывает как решаются задачи.
Нас интересут правильное обнаружение сигнала. Соответственно имеется 
параметры -- вероятность правильного обнаружения (есть сигнал и мы его
увидели), вероятность ложной тревоги (сигнала нет, но мы решили что есть) 
вероятность пропуска сигнала (сигнал был, но мы решили что нет).
РХП покахывает зависимость вероятности правильного обнаружения
от вероятности ложной тревоги. На практике задаются некоторые
вероятности ложной тревоги и пытаются повысить вероятность правильного 
обнаружения.


Вернёмся к видам модуляции, чтобы понять лучше суть РХП.

![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_9.png)
Рассмотрим BPSK. Есть задача различения 1 и -1. Суть -- различить их
при условии шума. <!-- тут картинки 2 синусоиды, сдвинутых по фазе,
картинка с адским шумом и 2 картинки их суммы -->
Чем больше 

Шумы бывают аддитивные и мультипликативные. Что такое мультипликатывные?
Те, которые перемножаются с сигналом. Что это такое? Это модулирующий
шум; то есть у нас в среде есть ещё один `модулятор'.

Аддитивные шумы очень просто убрать -- инвертровать и сложить.
С мультипликативными сложно. <!-- я не записал -->

Аддитивный белый гауссовский шум (АБГШ, он же AWGN). Почему гауссовский?
Потому что уровни шума распределяются по Гауссу. <!-- что-то из теорвера,
про дисперсию и среднеквадратичное отклонение, не успел --> В паузах
между приёмом дискретных сигналов ДМ собирают статистику по шуму и 
используют эту информацию для очистки сигнала.



### Решение задачи обнаружения сигнала
![alt text](https://raw.githubusercontent.com/krasnotsvetov/Networks_course/master/Images/2_10.png)

Есть два варианта

 - Пассивные корреляторы (они же -- согласованные фильтры 
   (они согласованы с сигналом))<br/>
   Они принимаю сигнал и выдают мощность путём складывания входящего 
   сигнала с внутренним. Побеждает тот, кто выдал наибольшую мощность. 
 - Активный коррелятор <br/>
   Работает это чудо как передатчик. Там стоит генератор несущих 
   колебаний. Гораздо более гибкие и не зависят от числа сигналов.
   Генераторы синхронизируются. С модулятора уходит сигнал, на ДМ приходит
   задержанный сигнал; сигнал генератора ДМ перемножается с задержаным
   и измеряется их энергия. <!-- немного физики --> Интекарл от 0 до T
   u(t)u(t-tau) dt -- АКФ (автокорреляционная функция). Далее АКФ работает
   как фильтры. Но у нас не один сигнал, поэтому используется ВКФ --
   \int_0^T u(t)v(t-tau) dt. Собственно вычисляется n-1 ВКФ и 1 АКФ, где
   n -- количество сигналов.
   
 Собственно в первом случае у нас жёсткая система, габариты которой пропорциональны количеству сигналов. Во втором -- большие затраты энергии и усложнение из-за необходимости синхронизации.

Синхронизация бывает цикловая (по временным отрезкам) и тактовая (по импульсам). Делать её можно разными способами, наиболее распространённые -- преамбула (для цикловой) и синхросигналы (для тактовой).

К слову, синхронизация может использоватья для определения местоположения.
